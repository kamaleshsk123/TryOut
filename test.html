<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Device Data</title>
  </head>
  <body>
    <h1>Device Data</h1>

    <!-- Device Information Section -->
    <h2>Device Information</h2>
    <form id="deviceInfoForm">
      <label for="dateReported">Date Reported:</label>
      <input type="text" id="dateReported" name="dateReported" />

      <label for="deviceid">Device ID:</label>
      <input type="text" id="deviceid" name="deviceid" />

      <label for="system">System:</label>
      <input type="text" id="system" name="system" />

      <label for="type">Type:</label>
      <input type="text" id="type" name="type" />

      <label for="lasttxtime">Last TX Time:</label>
      <input type="text" id="lasttxtime" name="lasttxtime" />
    </form>

    <!-- Point Information Section -->
    <h2>Point Information</h2>
    <form id="pointInfoForm">
      <!-- Add input fields for each point information -->
      <!-- Example: -->
      <label for="Point_CurrentMode">Point Current Mode:</label>
      <input type="text" id="Point_CurrentMode" name="Point_CurrentMode" />

      <label for="PointSensor_Name_ActiveErrors1"
        >PointSensor Name Active Errors 1:</label
      >
      <input
        type="text"
        id="PointSensor_Name_ActiveErrors1"
        name="PointSensor_Name_ActiveErrors1"
      />

      <label for="PointSensor_Name_ActiveErrors2"
        >PointSensor Name Active Errors 2:</label
      >
      <input
        type="text"
        id="PointSensor_Name_ActiveErrors2"
        name="PointSensor_Name_ActiveErrors2"
      />

      <!-- Repeat the above pattern for other point information -->
    </form>

    <!-- JavaScript to handle download -->
    <script>
      function downloadData() {
        // Collect data from input fields
        const deviceInfo = {
          dateReported: document.getElementById("dateReported").value,
          deviceid: document.getElementById("deviceid").value,
          system: document.getElementById("system").value,
          type: document.getElementById("type").value,
          lasttxtime: document.getElementById("lasttxtime").value,
        };

        // Collect point information data
        const pointInfo = {
          Point_CurrentMode: document.getElementById("Point_CurrentMode").value,
          PointSensor_Name_ActiveErrors1: document.getElementById(
            "PointSensor_Name_ActiveErrors1"
          ).value,
          PointSensor_Name_ActiveErrors2: document.getElementById(
            "PointSensor_Name_ActiveErrors2"
          ).value,
          // Add other fields following the same pattern
        };

        // Combine device and point information
        const data = {
          deviceInfo,
          pointInfo,
        };

        // Create a Blob containing the JSON data
        const blob = new Blob([JSON.stringify(data, null, 2)], {
          type: "application/json",
        });

        // Create a download link
        const downloadLink = document.createElement("a");
        downloadLink.href = URL.createObjectURL(blob);
        downloadLink.download = "device_data.json";

        // Simulate a click to trigger the download
        downloadLink.click();
      }
    </script>

    <!-- Button to trigger download -->
    <button type="button" onclick="downloadData()">Download Data</button>
  </body>
</html>
